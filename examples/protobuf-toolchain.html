<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.6 at 2016-01-08 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Maven Protocol Buffers Plugin &#x2013; Using Protobuf Toolchain</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20160108" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                Maven Protocol Buffers Plugin
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2016-01-08</span>
                  &nbsp;| <span id="projectVersion">Version: 0.5.0-SNAPSHOT</span>
                      </div>
            <div class="xright">                    <a href="http://code.google.com/p/protobuf/" class="externalLink" title="Google Protocol Buffers">Google Protocol Buffers</a>
              
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Overview</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Introduction">Introduction</a>
            </li>
                  <li class="none">
                          <a href="../plugin-info.html" title="Goals">Goals</a>
            </li>
                  <li class="none">
                          <a href="../usage.html" title="Usage">Usage</a>
            </li>
                  <li class="none">
                          <a href="../faq.html" title="FAQ">FAQ</a>
            </li>
          </ul>
                       <h5>Examples</h5>
                  <ul>
                  <li class="none">
            <strong>Protobuf Toolchain</strong>
          </li>
                  <li class="none">
                          <a href="../examples/protoc-artifact.html" title="Protoc Artifact">Protoc Artifact</a>
            </li>
                  <li class="none">
                          <a href="../examples/protoc-plugin.html" title="Custom Protoc Plugins">Custom Protoc Plugins</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                        <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                                                <li class="collapsed">
                          <a href="../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <!-- APT Format: http://maven.apache.org/doxia/references/apt-format.html --><div class="section">
<h2><a name="Using_Protobuf_Toolchain"></a>Using Protobuf Toolchain</h2>
<div class="section">
<h3><a name="Defining_Toolchains"></a>Defining Toolchains</h3>
<p>Toolchains are declared in a <tt>toolchains.xml</tt> file, which is by default expected to reside in <tt>~/.m2</tt> directory (however, in Maven3 it is possible to override the default location with <tt>-t</tt> or <tt>--toolchains</tt> command line parameter).</p>
<p>A sample <tt>toolchains.xml</tt> file with a protobuf toolchain definition:</p>
<div class="source">
<pre>
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;toolchains&gt;
  &lt;toolchain&gt;
    &lt;type&gt;protobuf&lt;/type&gt;
    &lt;provides&gt;
      &lt;version&gt;2.4.1&lt;/version&gt;
    &lt;/provides&gt;
    &lt;configuration&gt;
      &lt;protocExecutable&gt;C:/Java/protobuf-2.4.1/bin/protoc.exe&lt;/protocExecutable&gt;
    &lt;/configuration&gt;
  &lt;/toolchain&gt;
  ...
&lt;/toolchains&gt;

</pre></div><!-- TODO explain the above --></div>
<div class="section">
<h3><a name="Using_Protobuf_Toolchain_In_Standalone_Project"></a>Using Protobuf Toolchain In Standalone Project</h3><!-- TODO detailed explanation --><!-- TODO mention that protobuf-maven-plugin extensions are required for the operation of maven-toolchains-plugin -->
<p>A sample configuration is provided below:</p>
<div class="source">
<pre>
&lt;project&gt;
  ...
  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-toolchains-plugin&lt;/artifactId&gt;
        &lt;version&gt;1.0&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;phase&gt;validate&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;toolchain&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
        &lt;configuration&gt;
          &lt;toolchains&gt;
            &lt;protobuf&gt;
              &lt;version&gt;[2.4,2.5)&lt;/version&gt;
            &lt;/protobuf&gt;
          &lt;/toolchains&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.xolstice.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;protobuf-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;0.5.0-SNAPSHOT&lt;/version&gt;
        &lt;extensions&gt;true&lt;/extensions&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;goals&gt;
              &lt;goal&gt;compile&lt;/goal&gt;
              &lt;goal&gt;test-compile&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;
      ...
    &lt;/plugins&gt;
    ...
  &lt;/build&gt;
  ...
&lt;/project&gt;

</pre></div></div>
<div class="section">
<h3><a name="Reusing_Protobuf_Toolchain_From_Parent_Project"></a>Reusing Protobuf Toolchain From Parent Project</h3>
<p>Suppose that there is a common parent for a number of child projects, which may also be contained as modules in the parent project. In that case it makes sense to enforce the toolchain once in the parent project and let the children inherit it.</p>
<p>Parent project is configured as in the example below. Note that only extensions are required from protobuf-maven-plugin; all the executions will be declared in the child projects.</p>
<div class="source">
<pre>
&lt;project&gt;
  ...
  &lt;packaging&gt;pom&lt;/packaging&gt;
  &lt;groupId&gt;com.yourcompany&lt;/groupId&gt;
  &lt;artifactId&gt;parent&lt;/artifactId&gt;
  &lt;version&gt;1.0&lt;/version&gt;
  ...
  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-toolchains-plugin&lt;/artifactId&gt;
        &lt;version&gt;1.0&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;phase&gt;validate&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;toolchain&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
        &lt;configuration&gt;
          &lt;toolchains&gt;
            &lt;protobuf&gt;
              &lt;version&gt;[2.4,2.5)&lt;/version&gt;
            &lt;/protobuf&gt;
          &lt;/toolchains&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.xolstice.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;protobuf-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;0.5.0-SNAPSHOT&lt;/version&gt;
        &lt;extensions&gt;true&lt;/extensions&gt;
      &lt;/plugin&gt;
      ...
    &lt;/plugins&gt;
    ...
  &lt;/build&gt;
  ...
&lt;/project&gt;

</pre></div>
<p>Child project is configured as in the example below. Note that there is no need to load protobuf-maven-plugin extensions in the child project, and neither there is any need to load toolchains again: this is all handled by the parent project.</p>
<div class="source">
<pre>
&lt;project&gt;
  ...
  &lt;parent&gt;
    &lt;groupId&gt;com.yourcompany&lt;/groupId&gt;
    &lt;artifactId&gt;parent&lt;/artifactId&gt;
    &lt;version&gt;1.0&lt;/version&gt;
  &lt;/parent&gt;
  &lt;groupId&gt;com.yourcompany&lt;/groupId&gt;
  &lt;artifactId&gt;child&lt;/artifactId&gt;
  &lt;version&gt;1.0&lt;/version&gt;
  ...
  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.xolstice.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;protobuf-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;0.5.0-SNAPSHOT&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;goals&gt;
              &lt;goal&gt;compile&lt;/goal&gt;
              &lt;goal&gt;test-compile&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;
      ...
    &lt;/plugins&gt;
    ...
  &lt;/build&gt;
  ...
&lt;/project&gt;

</pre></div></div>
<div class="section">
<h3><a name="References"></a>References</h3>
<ul>
<li><a class="externalLink" href="http://maven.apache.org/plugins/maven-toolchains-plugin/"> Maven Toolchains Plugin</a></li>
<li><a class="externalLink" href="http://maven.apache.org/ref/2.2.1/maven-toolchain/toolchains.html"> Toolchain descriptor</a></li></ul></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2016
                        <a href="https://github.com/xolstice/protobuf-maven-plugin/blob/master/AUTHORS">Maven Protocol Buffers Plugin Authors</a>.
            All rights reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
